import cbpro
class myWebsocketClient(cbpro.WebsocketClient):
    def on_open(self):
        self.url = "wss://ws-feed.pro.coinbase.com/"
        self.products = ["BTC-USD"]
    def on_message(self, msg):
        if 'price' in msg and 'match' in msg["type"]:
            if 'sell' in msg["side"]:
                action = 'buy'
            elif 'buy' in msg["side"]:
                action = 'sell'
            current_price = float(msg["price"])
            print (current_price, action)
    def on_close(self):
        print("-- Goodbye! --")

wsClient = myWebsocketClient()
wsClient.start()
